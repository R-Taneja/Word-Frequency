<!DOCTYPE html>
<html>
<head>
    <title>Word Frequency Counter by Rohan Taneja</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
</head>
<body>
    <div class="center">
        <h1>Improve your writing</h1>
        <p>Reduce the number of repeated words in a paragraph with our free word frequency counter.</p>
        <br>
        <textarea name="inputtext" id="inputtext" placeholder="Enter your text here..." style="max-height: 500px;"></textarea>
        <br>
        <input type="submit" id="submitbutton" value="Submit" style="width: 100%;" onclick="decider()">
        <br>
        <p style="white-space: pre-wrap" id="results"></p>
        <br>
        <button onclick="findHi()">Find hi</button>
    </div>
    
    <script>
        var simplemde = new SimpleMDE({ 
            autofocus: true,
            toolbar: false,
            forceSync: true,
            spellChecker: false,
            status: false,
            element: document.getElementById("inputtext") 
        });
        
        function decider() {
            if (document.getElementById("results").innerHTML != "") {
                document.getElementById("results").innerHTML = "";
                textCounter();
            } else {
                textCounter();
            }
        }
        
        function textCounter() {
            var pattern = /\w+/g,
                string = document.getElementById("inputtext").value;
                matchedWords = string.match( pattern );
            var counts = matchedWords.reduce(function ( stats, word ) {
                if ( stats.hasOwnProperty( word ) ) {
                    stats[ word ] = stats[ word ] + 1;
                } else {
                    stats[ word ] = 1;
                }
                return stats;
            }, {} );
            
            for (const word in counts) {
                var resultsText = document.getElementById("results");
                resultsText.textContent += `${word}: ${counts[word]}`;
                resultsText.textContent += `\n`;
            }
            
            document.getElementById("submitbutton").value = "Check again";
        };
        
        function findHi() {
            newText = document.getElementById("inputtext").value.replace(/hi/g, "**hi**");
            simplemde.value = newText;
            //document.getElementById("inputtext").value = newText;
        }
    </script>
</body>
</html>
